# Fast Test Configuration
#
# Minimal configuration for quick testing and CI/CD validation.
# Use this to verify the pipeline works before running full training.
#
# Usage:
#   python scripts/train/train.py --config configs/ternary_fast_test.yaml

# Model Architecture (minimal)
model:
  name: TernaryVAEV5_11
  latent_dim: 8                       # Reduced for speed
  hidden_dim: 32                      # Smaller network
  max_radius: 0.95
  curvature: 1.0
  use_controller: false
  use_dual_projection: false

# Frozen Checkpoint (optional for testing)
frozen_checkpoint:
  path: null                          # Set to null for fresh training
  encoder_to_load: null
  decoder_to_load: null

# Loss Configuration (simplified)
loss:
  geodesic:
    enabled: true
    curvature: 1.0
    max_target_distance: 3.0
    valuation_scale: 3.0
    n_pairs: 500                      # Fewer pairs for speed
    use_smooth_l1: true

  radial:
    enabled: true
    inner_radius: 0.1
    outer_radius: 0.85
    max_valuation: 9
    valuation_weighting: true

  curriculum:
    initial_tau: 0.0
    final_tau: 1.0
    warmup_epochs: 5                  # Fast warmup

# Training Configuration (minimal)
training:
  epochs: 10                          # Quick test
  batch_size: 256                     # Smaller batches
  lr: 1.0e-3
  weight_decay: 1.0e-4
  max_grad_norm: 1.0

  scheduler:
    type: cosine_warmup_restart
    T_0: 5
    T_mult: 2

  eval_every: 2
  save_every: 5

# Data Configuration
data:
  use_full_dataset: true
  n_operations: 19683

# Logging (reduced verbosity)
logging:
  tensorboard: false                  # Disable for quick tests
  log_dir: runs/fast_test
  print_every: 2

# Checkpoints
checkpoints:
  save_dir: sandbox-training/checkpoints/fast_test
  save_best: false                    # Don't save for quick tests
  best_metric: radial_corr_A
  best_mode: min

# Success Criteria (relaxed for testing)
targets:
  coverage: 0.5                       # Lower threshold for testing
  radial_hierarchy: 0.0               # Any value acceptable
  distance_correlation: 0.0           # Any value acceptable
